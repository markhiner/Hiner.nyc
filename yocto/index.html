<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
  <title>yocto · hotels</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Encode+Sans+SC:wght@100;200;300;400&display=swap" rel="stylesheet">
  <style>
    *,*::before,*::after{box-sizing:border-box}
    html{-webkit-text-size-adjust:100%}
    body{
      margin:0;background:#0b0b0b;color:#eee;min-height:100vh;
      display:flex;align-items:center;justify-content:center;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif
    }
    .card{
      background:#161616;border:1px solid #2a2a2a;border-radius:16px;
      width:min(92vw,520px);
      padding:24px calc(24px + env(safe-area-inset-right)) 24px calc(24px + env(safe-area-inset-left));
      box-shadow:0 10px 30px rgba(0,0,0,.35)
    }
    input,button{
      width:100%;padding:12px 14px;border-radius:12px;border:1px solid #2a2a2a;
      background:#0f0f0f;color:#f0f0f0;font-size:17px;-webkit-appearance:none;appearance:none
    }
    input::placeholder{color:#bfc5cc}
    .field{margin-top:14px}

    /* City chips: compact, wrap, never full-width */
    .chips{display:flex;flex-wrap:wrap;gap:10px;margin-top:10px}
    .chip{
      display:inline-flex;align-items:center;justify-content:center;flex:0 0 auto;
      min-width:64px;padding:10px 12px;border-radius:999px;border:1px solid #2a2a2a;
      background:#0f0f0f;color:#fff;text-decoration:none;
      font-family:"Encode Sans SC",sans-serif;font-weight:100;font-optical-sizing:auto;font-variation-settings:"wdth" 100;
      line-height:1
    }
    .chip:active{transform:scale(.98)}
    .chip.star{min-width:auto;padding:10px 14px}

    /* Nights stepper */
    .nwrap{display:grid;grid-template-columns:84px 1fr 84px;gap:12px;align-items:center;margin-top:14px}
    .nbtn{height:64px;font-size:28px;border-radius:12px;border:1px solid #2a2a2a;background:#0f0f0f;color:#f0f0f0}
    .nbtn:active{transform:scale(.98)}
    .nval{display:flex;align-items:center;justify-content:center;gap:10px;height:64px;border:1px solid #2a2a2a;background:#0f0f0f;border-radius:12px}
    .nval input{width:80px;text-align:center;font-size:22px;height:100%;border:none;background:transparent;color:#f0f0f0;outline:none}
    .nlabel{font-size:16px;color:#cfd3d7}

    /* Search button */
    .go{
      margin-top:14px;font-family:"Encode Sans SC",sans-serif;font-weight:100;font-optical-sizing:auto;font-variation-settings:"wdth" 100;
      font-size:20px;padding:14px 16px;border-radius:12px;background:#0f0f0f;border:1px solid #2a2a2a;color:#fff
    }
    .go:active{transform:scale(.99)}
  </style>
</head>
<body>
  <div class="card">
    <form id="form" method="GET" action="https://api.hiner.nyc/run" autocomplete="on">
      <input type="hidden" name="q" id="q"> <!-- backend accepts q OR where -->

      <div class="field">
        <input id="where" name="where" type="text" placeholder="Where to?" autocapitalize="words" autocomplete="off">
        <div class="chips" id="chips">
          <button type="button" class="chip" data-display="New York City" data-q="New York City">NYC</button>
          <button type="button" class="chip" data-display="Washington, DC" data-q="Washington, DC">DC</button>
          <button type="button" class="chip" data-display="Las Vegas" data-q="Las Vegas">Vegas</button>
          <button type="button" class="chip" data-display="Miami" data-q="Miami">Miami</button>
          <button type="button" class="chip" data-display="Los Angeles" data-q="Los Angeles">LA</button>
          <button type="button" class="chip" data-display="Denver" data-q="Denver">DEN</button>
          <button type="button" class="chip star" id="lux"><span aria-hidden="true">★★★★★</span><span class="sr">Luxury</span></button>
        </div>
      </div>

      <div class="field">
        <input id="when" name="when" type="date" required>
      </div>

      <div class="nwrap">
        <button type="button" class="nbtn" id="minus" aria-label="Decrease nights">−</button>
        <div class="nval">
          <input id="nights" name="nights" type="number" min="1" value="1" required inputmode="numeric" pattern="[0-9]*">
          <span class="nlabel" id="nlabel">night</span>
        </div>
        <button type="button" class="nbtn" id="plus" aria-label="Increase nights">+</button>
      </div>

      <button type="submit" class="go">Search</button>
    </form>
  </div>

<script>
  const where = document.getElementById('where');
  const when  = document.getElementById('when');
  const nights= document.getElementById('nights');
  const nlab  = document.getElementById('nlabel');
  const qhid  = document.getElementById('q');

  // default date = tomorrow
  const d = new Date(); d.setDate(d.getDate()+1); when.value = d.toISOString().slice(0,10);

  // label "night(s)"
  function setN(v){ const n = Math.max(1, parseInt(v||'1',10)); nights.value=n; nlab.textContent = (n===1?'night':'nights'); }
  setN(1);

  // stepper with press-and-hold
  function hold(el, delta){
    let t; const start=()=>{ step(); t=setTimeout(function rep(){ step(); t=setTimeout(rep,120); },350); };
    const stop =()=>{ clearTimeout(t); t=null; };
    const step =()=> setN((parseInt(nights.value||'1',10))+delta);
    el.addEventListener('mousedown',start); el.addEventListener('touchstart',start,{passive:true});
    ['mouseup','mouseleave','touchend','touchcancel'].forEach(ev=>el.addEventListener(ev,stop));
  }
  hold(document.getElementById('minus'),-1);
  hold(document.getElementById('plus'), 1);
  nights.addEventListener('input',()=>setN(nights.value));

  // chips
  let overrideQ = null;
  document.getElementById('chips').querySelectorAll('.chip').forEach(btn=>{
    btn.addEventListener('click',()=>{
      if(btn.id==='lux'){
        where.value = '★★★★★';
        overrideQ = 'luxury';
      }else{
        const disp = btn.getAttribute('data-display')||'';
        const qval = btn.getAttribute('data-q')||disp;
        where.value = disp;
        overrideQ = qval;
      }
      where.blur();
      if(when && when.showPicker) when.showPicker();
    });
  });

  // auto-collapse + auto-submit on date pick
  when.addEventListener('change',()=>{
    when.blur();
    if (form.requestSubmit) form.requestSubmit();
    else form.submit();
  });

  // on submit, set q param properly
  const form = document.getElementById('form');
  form.addEventListener('submit',()=>{
    const typed = (where.value||'').trim();
    qhid.value = overrideQ || typed;
  });
</script>
</body>
</html>