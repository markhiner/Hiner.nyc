<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
  <title>yocto Â· fly</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Encode+Sans+SC:wght@100;200;400&display=swap" rel="stylesheet">
  <style>
    *,*::before,*::after{box-sizing:border-box}
    html{-webkit-text-size-adjust:100%}
    body{
      margin:0;background:#0b0b0b;color:#eee;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
      min-height:100vh;display:flex;align-items:center;justify-content:center
    }
    .card{
      background:#161616;border:1px solid #2a2a2a;border-radius:16px;
      width:min(92vw,560px);
      padding:24px calc(24px + env(safe-area-inset-right)) 24px calc(24px + env(safe-area-inset-left));
      box-shadow:0 10px 30px rgba(0,0,0,.35)
    }
    input,button{width:100%;padding:12px 14px;border-radius:10px;border:1px solid #2a2a2a;background:#0f0f0f;color:#f0f0f0;font-size:17px;-webkit-appearance:none;appearance:none}
    button{cursor:pointer}
    .field{margin-top:14px}
    .field input::placeholder{color:#c9cdd2}
    .row{display:grid;grid-template-columns:1fr;gap:12px}

    .chips{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
    .chip{
      flex:0 0 auto;padding:10px 14px;border-radius:999px;border:1px solid #2a2a2a;background:#0f0f0f;color:#fff;
      font-family:"Encode Sans SC",sans-serif;font-weight:100;font-optical-sizing:auto;font-variation-settings:"wdth" 100;font-size:16px;line-height:1
    }
    .chip:active{transform:scale(.98)}

    .toggle{
      display:flex;background:#0f0f0f;border:1px solid #2a2a2a;border-radius:12px;overflow:hidden;margin-top:12px
    }
    .opt{
      flex:1;padding:12px 8px;text-align:center;user-select:none
    }
    .opt[data-on="true"]{background:#111;color:#fff;font-weight:400}
    .search-btn{
      font-family:"Encode Sans SC",sans-serif;font-weight:100;font-optical-sizing:auto;font-variation-settings:"wdth" 100;
      font-size:20px;padding:14px 16px;border-radius:12px;background:#0f0f0f;border:1px solid #2a2a2a;color:#fff;margin-top:14px
    }
  </style>
</head>
<body>
  <div class="card">
    <form id="fly" method="GET" action="https://fbb9b41ca81e.ngrok.app/fly/run" autocomplete="on">
      <!-- FROM -->
      <div class="field">
        <input id="dep" name="departure" type="text" placeholder="From?" required>
        <div class="chips" data-target="dep">
          <button type="button" class="chip" data-disp="RDU">RDU</button>
          <button type="button" class="chip" data-disp="GSO">GSO</button>
          <button type="button" class="chip" data-disp="home">HOME</button>
          <button type="button" class="chip" data-disp="NYC">NYC</button>
          <button type="button" class="chip" data-disp="LGA">LGA</button>
          <button type="button" class="chip" data-disp="JFK">JFK</button>
          <button type="button" class="chip" data-disp="DCA">DCA</button>
          <button type="button" class="chip" data-disp="LAS">LAS</button>
          <button type="button" class="chip" data-disp="MIA">MIA</button>
          <button type="button" class="chip" data-disp="DEN">DEN</button>
        </div>
      </div>

      <!-- TO -->
      <div class="field">
        <input id="arr" name="arrival" type="text" placeholder="To?" required>
        <div class="chips" data-target="arr">
          <button type="button" class="chip" data-disp="RDU">RDU</button>
          <button type="button" class="chip" data-disp="GSO">GSO</button>
          <button type="button" class="chip" data-disp="home">HOME</button>
          <button type="button" class="chip" data-disp="NYC">NYC</button>
          <button type="button" class="chip" data-disp="LGA">LGA</button>
          <button type="button" class="chip" data-disp="JFK">JFK</button>
          <button type="button" class="chip" data-disp="DCA">DCA</button>
          <button type="button" class="chip" data-disp="LAS">LAS</button>
          <button type="button" class="chip" data-disp="MIA">MIA</button>
          <button type="button" class="chip" data-disp="DEN">DEN</button>
        </div>
      </div>

      <!-- DATE -->
      <div class="field">
        <input id="date" name="date" type="date" required>
      </div>

      <!-- CLASS (First default) -->
      <div class="field">
        <div class="toggle" role="tablist" aria-label="Travel class">
          <button type="button" class="opt" id="cls-main" data-val="main" data-on="false">Main</button>
          <button type="button" class="opt" id="cls-first" data-val="first" data-on="true">First</button>
        </div>
        <input type="hidden" name="class" id="class" value="first">
      </div>

      <button type="submit" class="search-btn">Search Flights</button>
    </form>
  </div>

<script>
  // chips: write chip label into the correct input (dep/arr)
  document.querySelectorAll('.chips').forEach(group=>{
    const target = document.getElementById(group.dataset.target);
    group.querySelectorAll('.chip').forEach(ch=>{
      ch.addEventListener('click', ()=>{
        target.value = ch.dataset.disp || ch.textContent.trim();
        if (target === document.getElementById('dep')) document.getElementById('arr').focus();
        else document.getElementById('date').showPicker && document.getElementById('date').showPicker();
      });
    });
  });

  // class toggle
  const mainBtn = document.getElementById('cls-main');
  const firstBtn = document.getElementById('cls-first');
  const classHidden = document.getElementById('class');
  function setClass(val){
    classHidden.value = val;
    mainBtn.dataset.on = (val==='main');
    firstBtn.dataset.on = (val==='first');
  }
  mainBtn.addEventListener('click', ()=> setClass('main'));
  firstBtn.addEventListener('click', ()=> setClass('first'));
</script>
</body>
</html>
